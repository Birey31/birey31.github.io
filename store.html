<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="icon" type="image/png" href="media/mobillogo.webp">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Reeha | Store</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --accent-opacity: 0.05;
        }

        body[data-theme="dark"] {
            --bg-color: #000000;
            --text-color: #ffffff;
            --accent-opacity: 0.1;
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Courier New", Courier, monospace;
            transition: background-color 0.4s ease, color 0.4s ease;
            height: 100vh;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        /* --- HERO SECTION --- */
        #hero-section {
            display: none !important;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg-color);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-img-box {
            width: 80%;
            height: 80%;
            border: 1px solid var(--text-color);
            position: relative;
            overflow: hidden;
        }

        .hero-img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-close {
            position: absolute;
            bottom: 20px;
            right: 20px;
            cursor: pointer;
            font-size: 12px;
            background: var(--bg-color);
            padding: 5px 10px;
            border: 1px solid var(--text-color);
        }

        /* --- LOGO VE SAAT --- */
        .header-left {
            position: fixed;
            top: 30px;
            left: 40px;
            z-index: 1000;
        }

        .brand-logo {
            font-family: 'Averta', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 1px;
            line-height: 1;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        #current-time {
            font-size: 11px;
            opacity: 0.8;
            letter-spacing: 0.5px;
            min-height: 15px;
            display: block !important;
        }

        /* --- GLOBAL OVERLAY --- */
        #globalOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 1500;
            display: none;
            cursor: pointer;
            backdrop-filter: blur(4px);
        }

        #globalOverlay.active {
            display: block;
        }

        /* --- ÜST SAĞ NAV --- */
        .top-right-nav {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 1000;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--text-color);
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
        }

        body[data-theme="light"] .theme-toggle {
            background: var(--text-color);
        }

        .cart-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 13px;
            cursor: pointer;
            text-transform: lowercase;
        }

        /* --- HAVUZ SİSTEMLERİ --- */
        #infoPool, #productDetailPool, #checkoutPool {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            width: 80%;
            height: 75%;
            background-color: var(--bg-color);
            border: 1px solid var(--text-color);
            z-index: 2500;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        #infoPool.active, #productDetailPool.active, #checkoutPool.active {
            display: flex;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .info-container {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .info-sidebar {
            width: 200px;
            border-right: 1px solid var(--text-color);
            padding: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex-shrink: 0;
        }

        .info-nav-link {
            font-size: 11px;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
            text-transform: lowercase;
        }

        .info-nav-link.active {
            opacity: 1;
            text-decoration: underline;
        }

        .info-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.8;
        }

        .detail-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .detail-img-box {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--text-color);
            padding: 40px;
        }

        .detail-img-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .detail-info-box {
            width: 400px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 25px;
        }

        .size-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .size-btn {
            border: 1px solid var(--text-color);
            background: none;
            color: var(--text-color);
            padding: 5px 12px;
            cursor: pointer;
            font-size: 10px;
            transition: 0.3s;
            font-family: inherit;
        }

        .size-btn.selected {
            background: var(--text-color);
            color: var(--bg-color);
        }

        .add-to-cart-btn {
            background: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            text-transform: lowercase;
            margin-top: 10px;
        }

        /* --- ÜRÜN LİSTESİ / HAVUZ --- */
        .products-pool {
            position: fixed;
            top: 52%;
            left: 55%;
            transform: translate(-50%, -50%);
            width: fit-content;
            height: 65%;
            border: 1px solid var(--text-color);
            background-color: var(--bg-color);
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
            transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1), height 0.3s;
        }

        .products-pool.expanded {
            width: 65%;
            overflow: hidden;
        }

        #pool-initial-img {
            height: 100%;
            width: auto;
            object-fit: contain;
            display: block;
            cursor: pointer;
        }

        .products-grid {
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            width: 100%;
            height: 100%;
            padding: 30px;
            overflow-y: auto;
        }

        .product-card {
            cursor: pointer;
        }

        .product-box {
            width: 100%;
            aspect-ratio: 1/1;
            border: 1px solid rgba(128,128,128,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .product-box img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-box img {
            transform: scale(1.1);
        }

        .product-info {
            font-size: 9px;
            text-transform: lowercase;
            opacity: 0.8;
            text-align: center;
        }

        /* --- SEPET TASARIMI --- */
        .side-cart {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100vh;
            background-color: var(--bg-color);
            transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 2000;
            padding: 30px;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--text-color);
        }

        .side-cart.active {
            right: 0;
        }

        .cart-items-container {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(128,128,128,0.2);
            padding-bottom: 10px;
            font-size: 11px;
        }

        .qty-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }

        .qty-btn {
            background: none;
            border: 1px solid var(--text-color);
            color: var(--text-color);
            width: 18px;
            height: 18px;
            cursor: pointer;
            font-size: 12px;
            line-height: 1;
        }

        .cart-footer {
            border-top: 1px solid var(--text-color);
            padding-top: 20px;
        }

        .cart-note {
            width: 100%;
            background: none;
            border: 1px solid rgba(128,128,128,0.4);
            color: var(--text-color);
            font-family: inherit;
            font-size: 10px;
            padding: 10px;
            height: 60px;
            resize: none;
            margin-bottom: 15px;
            outline: none;
        }

        .checkout-btn {
            width: 100%;
            background: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 15px;
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            text-transform: lowercase;
            font-weight: bold;
        }

        /* --- ÖDEME FORMU --- */
        .checkout-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .checkout-form-box {
            flex: 1;
            padding: 60px;
            overflow-y: auto;
        }

        .checkout-summary-box {
            width: 300px;
            border-left: 1px solid var(--text-color);
            padding: 40px;
            font-size: 11px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 10px;
            margin-bottom: 5px;
            opacity: 0.7;
        }

        .form-input {
            width: 100%;
            background: none;
            border: 1px solid var(--text-color);
            color: var(--text-color);
            padding: 10px;
            font-family: inherit;
            font-size: 16px;
            outline: none;
        }

        .checkout-step-title {
            font-size: 18px;
            margin-bottom: 30px;
            text-transform: lowercase;
            border-bottom: 1px solid var(--text-color);
            padding-bottom: 10px;
        }

        /* --- NAV & FOOTER --- */
        nav#main-nav {
            position: fixed;
            left: 40px;
            top: 180px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 10;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-color);
            font-size: 14px;
            text-transform: lowercase;
            cursor: pointer;
            opacity: 0.5;
        }

        .nav-link.active {
            opacity: 1;
            font-weight: bold;
            text-decoration: underline;
        }

        .legal-footer {
            position: fixed;
            bottom: 40px;
            left: 40px;
            display: flex;
            gap: 20px;
        }

        .legal-link {
            font-size: 11px;
            opacity: 0.5;
            cursor: pointer;
            color: var(--text-color);
            text-transform: lowercase;
        }

        .lang-wrapper {
            position: fixed;
            right: 40px;
            bottom: 40px;
            cursor: pointer;
            z-index: 10;
            font-size: 12px;
            opacity: 0.7;
            text-transform: lowercase;
        }

        .artwork-credit {
            position: absolute;
            bottom: -20px;
            right: 0;
            font-size: 8px; 
            opacity: 0.5;
            text-transform: lowercase;
            font-family: inherit;
            pointer-events: none;
        }

        /* --- MOBILE SPECIAL --- */
        @media (max-width: 768px) {
            nav#main-nav {
                top: 100px;
                left: 0;
                width: 100%;
                flex-direction: row;
                justify-content: flex-start;
                padding: 0 40px;
                gap: 20px;
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }

            .products-pool {
                width: 90% !important;
                left: 50%;
                height: 55%;
                top: 45%;
                transform: translate(-50%, -35%);
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 15px;
            }

            .legal-footer {
                flex-direction: column;
                bottom: 80px;
                gap: 10px;
            }

            #infoPool {
                width: 95% !important;
                height: 85% !important;
            }

            .side-cart {
                width: 85%;
                height: 80vh;
                right: 10px;
                top: 50%;
                transform: translateY(-50%) translateX(100%);
            }

            .side-cart.active {
                transform: translateY(-50%) translateX(0);
            }
        }
    </style>
</head>
<body data-theme="light">

    <div id="globalOverlay" onclick="handleOverlayClick()"></div>

    <div id="hero-section">
        <div class="hero-img-box">
            <img src="media/sanat.webp" alt="Sanat">
            <div class="hero-close" onclick="closeHero()">[giris yap]</div>
        </div>
    </div>

    <div id="productDetailPool">
        <div style="position:absolute; top:20px; right:20px; cursor:pointer; font-size:10px; opacity:0.5; z-index:10;" onclick="closeAllPanels()">[kapat]</div>
        <div id="productDetailContent" class="detail-container"></div>
    </div>

    <div id="infoPool">
        <div class="info-close-btn" style="position:absolute; top:15px; right:15px; cursor:pointer; font-size:10px; opacity:0.5; z-index:100;" onclick="closeAllPanels()">[kapat]</div>
        <div class="info-container">
            <div class="info-sidebar">
                <div class="info-nav-link" onclick="loadInfo('sales')" id="link-sales" data-tr="mesafeli satış" data-en="distance sales">mesafeli satış</div>
                <div class="info-nav-link" onclick="loadInfo('shipping')" id="link-shipping" data-tr="teslimat & iade" data-en="shipping & returns">teslimat & iade</div>
                <div class="info-nav-link" onclick="loadInfo('privacy')" id="link-privacy" data-tr="kvkk" data-en="privacy">kvkk</div>
                <div class="info-nav-link" onclick="loadInfo('contact')" id="link-contact" data-tr="iletişim" data-en="contact">iletişim</div>
            </div>
            <div class="info-content" id="infoContent"></div>
        </div>
    </div>

    <div id="checkoutPool">
        <div style="position:absolute; top:20px; right:20px; cursor:pointer; font-size:10px; opacity:0.5; z-index:3000;" onclick="closeAllPanels()">[iptal]</div>
        <div class="checkout-container">
            <div class="checkout-form-box" id="checkoutFormContent"></div>
            <div class="checkout-summary-box">
                <div id="summaryTitle" style="margin-bottom:20px; font-weight:bold; border-bottom:1px solid var(--text-color); padding-bottom:5px;">özet</div>
                <div id="checkoutSummaryItems"></div>
                <div style="margin-top:20px; font-size:14px; display:flex; justify-content:space-between; font-weight:bold;">
                    <span>total:</span>
                    <span id="checkoutTotal">0€</span>
                </div>
            </div>
        </div>
    </div>

    <div class="header-left">
        <div class="brand-logo" onclick="window.location.href='index.html'" style="cursor: pointer;">REEHA</div>
        <div id="current-time"></div>
    </div>

    <div class="top-right-nav">
        <button class="cart-toggle" onclick="toggleCart()" id="cartCount" data-tr-prefix="sepet" data-en-prefix="cart">sepet (0)</button>
        <button class="theme-toggle" onclick="toggleTheme()"></button>
    </div>

    <div class="side-cart" id="sideCart">
        <div style="font-size:12px; margin-bottom:20px; border-bottom:1px solid var(--text-color); padding-bottom:10px; text-transform:lowercase; display:flex; justify-content:space-between;">
            <span id="cartHeaderLabel" data-tr="sepet" data-en="cart">sepet</span>
            <span onclick="toggleCart()" style="cursor:pointer; opacity:0.5;">[x]</span>
        </div>
        <div id="cartItems" class="cart-items-container">
            <div id="emptyCartTxt" style="opacity:0.5; font-size:10px;">boş.</div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display:none;">
            <textarea id="cartNotePlaceholder" class="cart-note"></textarea>
            <div style="font-size:12px; margin-bottom:15px; display:flex; justify-content:space-between;">
                <span>total:</span>
                <span id="cartTotal">0€</span>
            </div>
            <button class="checkout-btn" onclick="startCheckout()" id="checkoutBtnLabel" data-tr="ödeme" data-en="checkout">ödeme</button>
        </div>
    </div>

    <nav id="main-nav">
        <a onclick="loadProducts('news', event)" class="nav-link" data-tr="hepsi" data-en="all">hepsi</a>
        <a onclick="loadProducts('tops', event)" class="nav-link" data-tr="üst giyim" data-en="tops">üst giyim</a>
        <a onclick="loadProducts('bottoms', event)" class="nav-link" data-tr="alt giyim" data-en="bottoms">alt giyim</a>
        <a onclick="loadProducts('accessories', event)" class="nav-link" data-tr="aksesuar" data-en="accessories">aksesuar</a>
    </nav>

    <main class="products-pool" id="productsPool">
        <img src="media/sanat.webp" alt="Sanat" id="pool-initial-img" onclick="loadProducts('news')">
        <div id="artwork-info" class="artwork-credit">edward hopper, 1942</div>
        <div class="products-grid" id="productGrid"></div>
    </main>

    <footer class="legal-footer">
        <div class="legal-link" onclick="openInfoPool('sales')" data-tr="mesafeli satış" data-en="distance sales">mesafeli satış</div>
        <div class="legal-link" onclick="openInfoPool('shipping')" data-tr="teslimat ve iade" data-en="shipping & returns">teslimat ve iade</div>
        <div class="legal-link" onclick="openInfoPool('privacy')" data-tr="kvkk" data-en="privacy">kvkk</div>
        <div class="legal-link" onclick="openInfoPool('contact')" data-tr="iletişim" data-en="contact">iletişim</div>
    </footer>

    <div class="lang-wrapper" onclick="toggleLanguage()" id="langTxt">tr</div>

    <script>
        const productsData = {
            news: [
                { id: 1, name: "basic t-shirt white", price: 40, img: "elbise/tshirt1.webp", desc: "100% heavy cotton, relaxed fit." }, 
                { id: 2, name: "heavy cotton hoodie", price: 110, img: "elbise/tshirt2.webp", desc: "Oversized silhouette, premium fabric." },
                { id: 5, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" }, 
                { id: 6, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 7, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 8, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 9, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 10, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 11, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" }
            ],
            tops: [
                { id: 1, name: "basic t-shirt white", price: 40, img: "elbise/tshirt1.webp", desc: "100% heavy cotton." },
                { id: 2, name: "heavy cotton hoodie", price: 110, img: "elbise/tshirt2.webp", desc: "Oversized silhouette." }
            ],
            bottoms: [
                { id: 5, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 6, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 7, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 8, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" }
            ],
            accessories: [
                { id: 9, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 10, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" },
                { id: 11, name: "yakında", price: 0, img: "media/mobillogo.webp", desc: "yakında" }
            ]
        };

        const infoTexts = {
            sales: { 
                tr: "Mesafeli Satış Sözleşmesi: Siparişleriniz 1-3 iş günü içinde işlenir. Tüm işlemler Türkiye Cumhuriyeti yasalarına tabidir.", 
                en: "Distance Sales Agreement: Your orders are processed within 1-3 business days. All transactions are subject to the laws of the Republic of Turkey." 
            },
            shipping: { 
                tr: "Teslimat ve İade: 14 gün içinde değişim ve iade hakkınız bulunmaktadır. İade kargo ücreti alıcıya aittir.", 
                en: "Shipping & Returns: You have the right to exchange or return within 14 days. Return shipping costs are the responsibility of the buyer." 
            },
            privacy: { 
                tr: "KVKK: Verileriniz Reeha bünyesinde güvendedir. Kişisel verileriniz 6698 sayılı kanun kapsamında korunmaktadır.", 
                en: "Privacy Policy: Your data is secure with Reeha. Your personal data is protected under law no. 6698." 
            },
            contact: { 
                tr: "İletişim: info@reeha.com | @reeha.studio | +90 000 000 00 00", 
                en: "Contact: info@reeha.com | @reeha.studio | +90 000 000 00 00" 
            }
        };

        const translations = {
            tr: { emptyCart: "boş.", orderNote: "sipariş notu...", addrTitle: "teslimat bilgileri", fullName: "ad soyad", email: "e-posta", city: "şehir", country: "ülke", address: "adres", proceedPay: "ödemeye geç", payTitle: "ödeme bilgileri", cardName: "kart üzerindeki isim", cardNumber: "kart numarası", expiry: "son kullanma (AA/YY)", cvv: "CVV", demoAlert: "* bu bir demo arayüzdür. gerçek işlem yapılmaz.", completeOrder: "siparişi tamamla", goBack: "[geri dön]", thanks: "teşekkürler!", success: "siparişiniz başarıyla alındı.", returnStore: "mağazaya dön", summary: "özet", selectSize: "lütfen beden seçin" },
            en: { emptyCart: "empty.", orderNote: "order note...", addrTitle: "shipping info", fullName: "full name", email: "email", city: "city", country: "country", address: "address", proceedPay: "proceed to payment", payTitle: "payment info", cardName: "name on card", cardNumber: "card number", expiry: "expiry (MM/YY)", cvv: "CVV", demoAlert: "* this is a demo interface. no real transaction.", completeOrder: "complete order", goBack: "[go back]", thanks: "thanks!", success: "your order has been received.", returnStore: "return to store", summary: "summary", selectSize: "please select a size" }
        };

        let currentLang = 'tr';
        let cart = [];

        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').innerText = now.toLocaleDateString('tr-TR') + " " + now.toLocaleTimeString('tr-TR');
        }

        function closeHero() {
            const hero = document.getElementById('hero-section');
            hero.style.opacity = '0';
            setTimeout(() => {
                hero.style.display = 'none';
            }, 500);
        }

        function expandPool() {
            const pool = document.getElementById('productsPool');
            if(pool) pool.classList.add('expanded');
        }

        function loadProducts(cat, e) {
            expandPool();
            const initialImg = document.getElementById('pool-initial-img');
            const artworkInfo = document.getElementById('artwork-info');
            if(initialImg) initialImg.style.display = 'none';
            if(artworkInfo) artworkInfo.style.display = 'none';
            
            const grid = document.getElementById('productGrid');
            grid.style.display = 'grid';

            grid.innerHTML = (cat === 'news' ? productsData[cat].filter(p => p.name !== "yakında") : productsData[cat]).map(p => `
                <div class="product-card" onclick="openProductDetail('${cat}', ${p.id})">
                    <div class="product-box"><img src="${p.img}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/300?text=reeha';"></div>
                    <div class="product-info">${p.name}<br><span style="opacity:0.5">${p.price}€</span></div>
                </div>`).join('');
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            if(e) e.target.classList.add('active');
        }

        function openProductDetail(cat, id) {
            const product = productsData[cat].find(p => p.id === id);
            const content = document.getElementById('productDetailContent');
            const btnTxt = currentLang === 'tr' ? 'sepete ekle' : 'add to cart';
            const sizeTxt = currentLang === 'tr' ? 'beden' : 'size';
            content.innerHTML = `
                <div class="detail-img-box"><img src="${product.img}" alt="${product.name}"></div>
                <div class="detail-info-box">
                    <div style="font-size: 18px; font-weight: bold;">${product.name}</div>
                    <div style="font-size: 12px; opacity: 0.7; line-height:1.5;">${product.desc}</div>
                    <div style="font-size: 16px;">${product.price}€</div>
                    <div>
                        <div style="font-size: 10px; margin-bottom: 5px;">${sizeTxt}:</div>
                        <div class="size-selector">
                            <button class="size-btn" onclick="selectSize(this)">S</button>
                            <button class="size-btn" onclick="selectSize(this)">M</button>
                            <button class="size-btn" onclick="selectSize(this)">L</button>
                        </div>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart('${product.name}', ${product.price})">${btnTxt}</button>
                </div>
            `;
            const pool = document.getElementById('productDetailPool');
            pool.style.display = 'flex';
            setTimeout(() => {
                pool.classList.add('active');
                document.getElementById('globalOverlay').classList.add('active');
            }, 10);
        }

        function selectSize(btn) {
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        function addToCart(name, price) {
            const size = document.querySelector('.size-btn.selected')?.innerText;
            if(!size) {
                alert(translations[currentLang].selectSize);
                return;
            }
            const existingItem = cart.find(i => i.name === name && i.size === size);
            if(existingItem) {
                existingItem.qty++;
            } else {
                cart.push({ name, price, size, qty: 1 });
            }
            updateCartUI();
            closeAllPanels();
        }

        function updateCartUI() {
            const container = document.getElementById('cartItems');
            const footer = document.getElementById('cartFooter');
            const totalEl = document.getElementById('cartTotal');
            const t = translations[currentLang];
            const cartBtn = document.getElementById('cartCount');
            const prefix = currentLang === 'tr' ? cartBtn.getAttribute('data-tr-prefix') : cartBtn.getAttribute('data-en-prefix');
            cartBtn.innerText = `${prefix} (${cart.reduce((a, b) => a + b.qty, 0)})`;
            document.getElementById('cartNotePlaceholder').placeholder = t.orderNote;

            if(cart.length === 0) {
                container.innerHTML = `<div style="opacity:0.5; font-size:10px;">${t.emptyCart}</div>`;
                footer.style.display = 'none';
                return;
            }
            footer.style.display = 'block';
            let total = 0;
            container.innerHTML = cart.map((item, index) => {
                total += (item.price * item.qty);
                return `
                    <div class="cart-item">
                        <div>
                            <div style="font-weight:bold">${item.name}</div>
                            <div style="opacity:0.6">${item.size} | ${item.price}€</div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="changeQty(${index}, -1)">-</button>
                                <span>${item.qty}</span>
                                <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
                            </div>
                        </div>
                        <div style="font-weight:bold">${item.price * item.qty}€</div>
                    </div>
                `;
            }).join('');
            totalEl.innerText = total + '€';
        }

        function changeQty(index, delta) {
            cart[index].qty += delta;
            if(cart[index].qty <= 0) cart.splice(index, 1);
            updateCartUI();
        }

        function openInfoPool(type) {
            const pool = document.getElementById('infoPool');
            pool.style.display = 'flex';
            loadInfo(type);
            setTimeout(() => {
                pool.classList.add('active');
                document.getElementById('globalOverlay').classList.add('active');
            }, 10);
        }

        function loadInfo(type) {
            document.querySelectorAll('.info-nav-link').forEach(link => link.classList.remove('active'));
            const linkEl = document.getElementById('link-' + type);
            if(linkEl) linkEl.classList.add('active');
            document.getElementById('infoContent').innerText = infoTexts[type][currentLang];
        }

        function startCheckout() {
            document.getElementById('sideCart').classList.remove('active');
            const pool = document.getElementById('checkoutPool');
            pool.style.display = 'flex';
            document.getElementById('summaryTitle').innerText = translations[currentLang].summary;
            const summary = document.getElementById('checkoutSummaryItems');
            summary.innerHTML = cart.map(i => `
                <div style="display:flex; justify-content:space-between; margin-bottom:5px; opacity:0.8;">
                    <span>${i.qty}x ${i.name}</span>
                    <span>${i.price * i.qty}€</span>
                </div>
            `).join('');
            document.getElementById('checkoutTotal').innerText = document.getElementById('cartTotal').innerText;
            showAddressStep();
            setTimeout(() => {
                pool.classList.add('active');
                document.getElementById('globalOverlay').classList.add('active');
            }, 10);
        }

        function showAddressStep() {
            const content = document.getElementById('checkoutFormContent');
            const t = translations[currentLang];
            content.innerHTML = `
                <div class="checkout-step-title">${t.addrTitle}</div>
                <div class="form-group"><label>${t.fullName}</label><input type="text" class="form-input"></div>
                <div class="form-group"><label>${t.email}</label><input type="email" class="form-input"></div>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
                    <div class="form-group"><label>${t.city}</label><input type="text" class="form-input"></div>
                    <div class="form-group"><label>${t.country}</label><input type="text" class="form-input"></div>
                </div>
                <div class="form-group"><label>${t.address}</label><textarea class="form-input" style="height:80px; resize:none;"></textarea></div>
                <button class="checkout-btn" style="margin-top:20px;" onclick="showPaymentStep()">${t.proceedPay}</button>
            `;
        }

        function showPaymentStep() {
            const content = document.getElementById('checkoutFormContent');
            const t = translations[currentLang];
            content.innerHTML = `
                <div class="checkout-step-title">${t.payTitle}</div>
                <div class="form-group"><label>${t.cardName}</label><input type="text" class="form-input"></div>
                <div class="form-group"><label>${t.cardNumber}</label><input type="text" placeholder="**** **** **** ****" class="form-input"></div>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;">
                    <div class="form-group"><label>${t.expiry}</label><input type="text" class="form-input"></div>
                    <div class="form-group"><label>${t.cvv}</label><input type="text" class="form-input"></div>
                </div>
                <div style="font-size:10px; opacity:0.5; margin-bottom:20px;">${t.demoAlert}</div>
                <button class="checkout-btn" onclick="completeOrder()">${t.completeOrder}</button>
                <div onclick="showAddressStep()" style="text-align:center; font-size:10px; margin-top:15px; cursor:pointer; opacity:0.5;">${t.goBack}</div>
            `;
        }

        function completeOrder() {
            const content = document.getElementById('checkoutFormContent');
            const t = translations[currentLang];
            content.innerHTML = `
                <div style="height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;">
                    <div style="font-size:40px; margin-bottom:20px;">✓</div>
                    <div style="font-size:18px; margin-bottom:10px;">${t.thanks}</div>
                    <div style="font-size:11px; opacity:0.7;">${t.success}</div>
                    <button class="checkout-btn" style="width:200px; margin-top:30px;" onclick="location.reload()">${t.returnStore}</button>
                </div>
            `;
            cart = [];
            updateCartUI();
        }

        function closeAllPanels() {
            document.querySelectorAll('#infoPool, #productDetailPool, #checkoutPool').forEach(p => p.classList.remove('active'));
            document.getElementById('sideCart').classList.remove('active');
            document.getElementById('globalOverlay').classList.remove('active');
            setTimeout(() => {
                document.querySelectorAll('#infoPool, #productDetailPool, #checkoutPool').forEach(p => p.style.display = 'none');
            }, 300);
        }

        function handleOverlayClick() { closeAllPanels(); }

        function toggleCart() {
            const sideCart = document.getElementById('sideCart');
            const overlay = document.getElementById('globalOverlay');
            sideCart.classList.toggle('active');
            if(sideCart.classList.contains('active')) overlay.classList.add('active'); else overlay.classList.remove('active');
        }

        function toggleTheme() {
            const body = document.body;
            if (body.getAttribute('data-theme') === 'dark') {
                body.setAttribute('data-theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
            }
        }

        function toggleLanguage() {
            currentLang = currentLang === 'tr' ? 'en' : 'tr';
            document.getElementById('langTxt').innerText = currentLang;
            document.querySelectorAll('[data-tr]').forEach(el => {
                el.textContent = currentLang === 'tr' ? el.getAttribute('data-tr') : el.getAttribute('data-en');
            });
            updateCartUI();
            if(document.getElementById('checkoutPool').classList.contains('active')) { startCheckout(); }
            const activeInfoLink = document.querySelector('.info-nav-link.active');
            if(activeInfoLink) { loadInfo(activeInfoLink.id.split('-')[1]); }
        }

        window.onload = () => { 
            updateTime(); 
            setInterval(updateTime, 1000); 
        };
    </script>
</body>
</html>
