<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REEHA | Official Store</title>
    <link rel="icon" type="image/webp" href="media/mobillogo.webp">

    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --accent-opacity: 0.05;
        }

        body[data-theme="dark"] {
            --bg-color: #000000;
            --text-color: #ffffff;
            --accent-opacity: 0.1;
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Courier New", Courier, monospace;
            transition: background-color 0.4s ease, color 0.4s ease;
            height: 100vh;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
        }

        .header-left {
            position: fixed;
            top: 30px;
            left: 40px;
            z-index: 1000;
        }

        .brand-logo {
            font-family: 'Averta', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 900;
            font-size: 24px;
            letter-spacing: 1px;
            line-height: 1;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        #current-time {
            font-size: 11px;
            opacity: 0.8;
            letter-spacing: 0.5px;
            min-height: 15px;
            display: block !important;
        }

        #globalOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 1500;
            display: none;
            cursor: pointer;
            backdrop-filter: blur(4px);
            pointer-events: none;
        }

        #globalOverlay.active {
            display: block;
            pointer-events: auto;
        }

        .top-right-nav {
            position: fixed;
            top: 30px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 1000;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--text-color);
            width: 14px;
            height: 14px;
            border-radius: 50%;
            cursor: pointer;
        }

        body[data-theme="light"] .theme-toggle {
            background: var(--text-color);
        }

        .cart-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 13px;
            cursor: pointer;
            text-transform: lowercase;
        }

        /* --- HAVUZLAR (Modal Pencereler) --- */
        #infoPool, #productDetailPool, #checkoutPool {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            width: 80%;
            height: 75%;
            background-color: var(--bg-color);
            border: 1px solid var(--text-color);
            z-index: 2500;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        #infoPool.active, #productDetailPool.active, #checkoutPool.active {
            display: flex;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* Bilgi Havuzu Ä°Ã§eriÄŸi */
        .info-container {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .info-sidebar {
            width: 200px;
            border-right: 1px solid var(--text-color);
            padding: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex-shrink: 0;
        }

        .info-nav-link {
            font-size: 11px;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
            text-transform: lowercase;
        }

        .info-nav-link.active {
            opacity: 1;
            text-decoration: underline;
        }

        .info-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            font-size: 12px;
            line-height: 1.8;
        }

        /* ÃœrÃ¼n Detay Ä°Ã§eriÄŸi */
        #productDetailContent {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .detail-container {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .detail-img-box {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--text-color);
            padding: 40px;
        }

        .detail-img-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .detail-info-box {
            width: 400px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 25px;
        }

        .mobile-prod-title { display: none; }
        .desktop-prod-title { display: block; margin-bottom: 10px; }
        .prod-desc-formal { margin-top: auto; width: 100%; }

        .size-selector { display: flex; gap: 10px; margin-top: 10px; }
        .size-btn {
            border: 1px solid var(--text-color);
            background: none;
            color: var(--text-color);
            padding: 5px 12px;
            cursor: pointer;
            font-size: 10px;
            transition: 0.3s;
            font-family: inherit;
        }
        .size-btn.selected { background: var(--text-color); color: var(--bg-color); }

        .add-to-cart-btn {
            background: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 12px;
            cursor: pointer;
            font-family: inherit;
            font-size: 11px;
            text-transform: lowercase;
            margin-top: 10px;
        }

        /* --- ANA ÃœRÃœN LÄ°STELEME HAVUZU --- */
        .products-pool {
            position: fixed;
            top: 52%;
            left: 55%;
            transform: translate(-50%, -50%);
            width: 65%;
            height: 65%;
            border: 1px solid var(--text-color);
            background-color: var(--bg-color);
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: visible;
            transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1), height 0.3s;
        }

        .products-pool.expanded { width: 65%; overflow: hidden; }

        #pool-initial-img {
            height: 100%;
            width: 100%;
            object-fit: contain;
            display: block;
            cursor: pointer;
            padding: 20px;
        }

        .products-grid {
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            width: 100%;
            height: 100%;
            padding: 30px;
            overflow-y: auto;
        }

        .product-card { cursor: pointer; }
        .product-box {
            width: 100%;
            aspect-ratio: 1/1;
            border: 1px solid rgba(128,128,128,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 8px;
        }
        .product-box img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            transition: transform 0.5s ease;
        }
        .product-card:hover .product-box img { transform: scale(1.1); }
        .product-info {
            font-size: 9px;
            text-transform: lowercase;
            opacity: 0.8;
            text-align: center;
        }

        /* --- YAN SEPET --- */
        .side-cart {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100vh;
            background-color: var(--bg-color);
            transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 2000;
            padding: 30px;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--text-color);
        }
        .side-cart.active { right: 0; }

        .cart-items-container { flex: 1; overflow-y: auto; margin-bottom: 20px; }
        .cart-header { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid var(--text-color); padding-bottom: 10px; }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(128,128,128,0.2);
            padding-bottom: 10px;
            font-size: 11px;
        }

        .cart-footer { border-top: 1px solid var(--text-color); padding-top: 20px; }
        .checkout-btn {
            width: 100%;
            background: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 15px;
            font-family: inherit;
            font-size: 12px;
            cursor: pointer;
            text-transform: lowercase;
            font-weight: bold;
        }
        .total-row { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 12px; font-weight: bold; }

        /* --- MENÃœ (NAV) --- */
        nav#main-nav {
            position: fixed;
            left: 40px;
            top: 180px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 2000 !important;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-color);
            font-size: 14px;
            text-transform: lowercase;
            cursor: pointer;
            opacity: 0.5;
            background: none;
            border: none;
            font-family: inherit;
            padding: 0;
            text-align: left;
        }
        .nav-link.active { opacity: 1; font-weight: bold; text-decoration: underline; }

        /* --- FOOTER & SAÄž ALT ELEMENTLER --- */
        .legal-footer {
            position: fixed;
            bottom: 40px;
            left: 40px;
            display: flex;
            gap: 20px;
        }
        .legal-link {
            font-size: 11px;
            opacity: 0.5;
            cursor: pointer;
            color: var(--text-color);
            text-transform: lowercase;
        }

        .copyright-text {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            opacity: 0.4;
            text-transform: lowercase;
            pointer-events: none;
            z-index: 100;
        }

        .bottom-right-container {
            position: fixed;
            right: 40px;
            bottom: 30px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 100;
        }

        .lang-wrapper {
            cursor: pointer;
            font-size: 11px;
            opacity: 0.6;
            text-transform: lowercase;
        }

        .social-link svg {
            width: 14px; 
            height: 14px;
            fill: var(--text-color);
            opacity: 0.6;
            transition: opacity 0.3s;
            display: block;
        }
        .social-link:hover svg { opacity: 1; }

        /* MOBÄ°L DÃœZENLEMELER */
        @media (max-width: 768px) {
            body {
                height: auto;          
                min-height: 100vh;     
                overflow-y: auto;      
                overflow-x: hidden;    
                position: relative;
                padding-bottom: 20px;
            }

            nav#main-nav {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 130px;
                display: flex;
                flex-direction: row;
                justify-content: center;
                align-items: flex-end;
                padding-bottom: 15px;
                background-color: var(--bg-color);
                z-index: 400;
                border-bottom: 1px solid var(--text-color);
            }

            .products-pool {
                position: relative !important;
                top: auto !important;
                left: auto !important;
                transform: none !important;
                width: 90% !important;
                height: auto !important;
                min-height: 50vh;
                margin: 200px auto 50px auto !important;
                padding: 0;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                padding: 15px;
                overflow: visible;
            }

            .legal-footer {
                position: relative;
                bottom: auto;
                left: auto;
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                margin-top: 20px;
            }

            .bottom-right-container {
                position: relative;
                bottom: auto;
                right: auto;
                width: 100%;
                justify-content: center;
                padding: 10px 0;
            }

            .copyright-text {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                width: 100%;
                text-align: center;
                padding: 20px 0 40px 0;
            }

            #productDetailPool, #infoPool {
                width: 95% !important;
                height: 90% !important;
                flex-direction: column;
                overflow-y: auto; 
            }

            #productDetailContent { flex-direction: column; height: auto; padding: 20px; align-items: center; text-align: center; }
            .mobile-prod-title { display: block; font-family: 'Averta', sans-serif; font-weight: 900; font-size: 20px; text-transform: uppercase; margin-bottom: 15px; width: 100%; border-bottom: 1px solid var(--text-color); padding-bottom: 10px; }
            .desktop-prod-title { display: none; }
            .detail-img-box { width: 100%; height: auto; max-height: 300px; border: none; padding: 0; margin-bottom: 20px; }
            .detail-info-box { width: 100%; padding: 0; border: none; display: flex; flex-direction: column; align-items: center; gap: 15px; }
            .prod-price { font-size: 18px !important; font-weight: bold; }
            .size-selector { justify-content: center; width: 100%; }
            .add-to-cart-btn { width: 100%; padding: 15px; font-size: 14px; }
            .prod-desc-formal { text-align: left; font-size: 10px; opacity: 0.7; margin-top: 20px; }
            
            .info-container { flex-direction: column; }
            .info-sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--text-color); padding: 20px; height: auto; }
            
            .side-cart { width: 90%; right: -100%; z-index: 4000; }
            .side-cart.active { right: 0; }
        }
    </style>
    </head>

<body data-theme="light">

    <div id="globalOverlay" onclick="handleOverlayClick()"></div>

    <header class="header-left">
        <div class="brand-logo">REEHA</div>
        <div id="current-time"></div>
    </header>

    <div class="top-right-nav">
        <button class="theme-toggle" onclick="toggleTheme()" title="TemayÄ± DeÄŸiÅŸtir"></button>
        <button class="cart-toggle" id="cartCount" data-tr-prefix="sepet" data-en-prefix="cart" onclick="toggleCart()">sepet (0)</button>
    </div>

    <nav id="main-nav">
        <button class="nav-link" onclick="filterCategory('tops')">tops</button>
        <button class="nav-link" onclick="filterCategory('bottoms')">bottoms</button>
    </nav>

    <main class="products-pool" id="mainPool">
       <img src="media/sanat.webp" id="pool-initial-img" onclick="expandPool()" alt="REEHA Cover">
        
        <div class="products-grid" id="productsGrid">
            </div>
    </main>

    <div id="productDetailPool">
        <div id="productDetailContent">
            </div>
        <button class="nav-link" style="position: absolute; bottom: 20px; right: 30px;" onclick="closeAllPanels()">close</button>
    </div>

    <div id="infoPool">
        <div class="info-container">
            <div class="info-sidebar">
                <div class="info-nav-link active" onclick="showInfo('shipping')">shipping</div>
                <div class="info-nav-link" onclick="showInfo('returns')">returns</div>
                <div class="info-nav-link" onclick="showInfo('contact')">contact</div>
                <button class="nav-link" style="margin-top:auto" onclick="closeAllPanels()">close</button>
            </div>
            <div class="info-content" id="infoContent">
                <p>Worldwide shipping available. Orders are processed within 2-4 business days.</p>
            </div>
        </div>
    </div>

    <div class="side-cart" id="sideCart">
        <div class="cart-header">
            <span>CART</span>
            <button onclick="toggleCart()" style="background:none; border:none; color:var(--text-color); cursor:pointer; font-size:12px;">[X]</button>
        </div>

        <div class="cart-items-container" id="cartItems">
            </div>

        <div class="cart-footer" id="cartFooter" style="display:none;">
            <div class="total-row">
                <span>toplam:</span>
                <span id="cartTotal">0.00 TL</span>
            </div>
            <button class="checkout-btn" id="checkoutBtnLabel" onclick="startCheckout()">Ã¶deme yap</button>
        </div>
    </div>

    <footer class="legal-footer">
        <button class="nav-link legal-link" onclick="openInfoModal()">terms</button>
        <button class="nav-link legal-link" onclick="openInfoModal()">privacy</button>
        <button class="nav-link legal-link" onclick="openInfoModal()">shipping</button>
    </footer>

    <div class="copyright-text">Â© 2026 REEHA STUDIO. ISTANBUL</div>

    <div class="bottom-right-container">
        <div class="lang-wrapper" onclick="toggleLanguage()">tr/en</div>
        <a href="https://instagram.com/reehastudio" target="_blank" class="social-link">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
        </a>
    </div>

    <script>
        // REEHA - Global DeÄŸiÅŸkenler
        let currentLang = 'tr';
        let cart = [];

        // ÃœrÃ¼n Verileri
        const productsData = {
            tops: [
                { id: 1, name: "t-shirt 01", price: "1200", desc: "100% Cotton, Heavyweight fabric.", img: "media/tshirt1.webp" },
                { id: 2, name: "t-shirt 02", price: "1200", desc: "Oversized fit, screen printed.", img: "media/tshirt2.webp" },
                { id: 3, name: "yakÄ±nda", price: "", desc: "", img: "media/elbise/yakinda.webp", isComingSoon: true }
            ],
            bottoms: [
                { id: 4, name: "yakÄ±nda", price: "", desc: "", img: "media/elbise/yakinda.webp", isComingSoon: true }
            ]
        };

        // ZamanÄ± GÃ¼ncelle
        window.updateTime = function() {
            const now = new Date();
            const timeStr = now.toLocaleDateString('tr-TR') + " " + now.toLocaleTimeString('tr-TR');
            const timeEl = document.getElementById('current-time');
            if(timeEl) timeEl.innerText = timeStr;
        };

        // Havuzu GeniÅŸletme (ÃœrÃ¼n Gridini AÃ§ma)
        window.expandPool = function() {
            const pool = document.getElementById('mainPool');
            const grid = document.getElementById('productsGrid');
            const initialImg = document.getElementById('pool-initial-img');

            if(pool) pool.classList.add('expanded');
            if(initialImg) initialImg.style.display = 'none';
            if(grid) grid.style.display = 'grid';
        };

        // Kategoriye GÃ¶re ÃœrÃ¼nleri YÃ¼kle
        window.filterCategory = function(cat) {
            window.expandPool();

            const grid = document.getElementById('productsGrid');
            if (!grid) return;

            // Aktif menÃ¼ stilini gÃ¼ncelle
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('onclick')?.includes(cat)) {
                    link.classList.add('active');
                }
            });

            const products = productsData[cat] || [];

            grid.innerHTML = products.map(p => {
                const isComingSoon = p.isComingSoon || p.name === "yakÄ±nda";
                const displayPrice = isComingSoon ? 'coming soon' : p.price + ' TL';
                const clickAction = isComingSoon ? '' : `onclick="openProductDetail('${cat}', ${p.id})"`;
                const style = isComingSoon ? 'opacity: 0.5; cursor: default;' : '';
                const imgSrc = p.img || 'media/mobillogo.webp';

                return `
                <div class="product-card" ${clickAction} style="${style}">
                    <div class="product-box">
                        <img src="${imgSrc}" alt="${p.name}" onerror="this.src='media/mobillogo.webp';">
                    </div>
                    <div class="product-info">
                        <p class="prod-name">${p.name}</p>
                        <p class="prod-price">${displayPrice}</p>
                    </div>
                </div>`;
            }).join('');
        };

        // ÃœrÃ¼n DetayÄ±nÄ± AÃ§ (Dinamik HTML OluÅŸturur)
        window.openProductDetail = function(cat, id) {
            const product = productsData[cat].find(p => p.id === id);
            const content = document.getElementById('productDetailContent');
            const pool = document.getElementById('productDetailPool');
            
            if(!product || !content || !pool) return;

            const btnTxt = currentLang === 'tr' ? 'sepete ekle' : 'add to cart';
            
            content.innerHTML = `
                <div class="mobile-prod-title">${product.name}</div>
                <div class="detail-container">
                    <div class="detail-img-box">
                        <img src="${product.img}" onerror="this.src='media/mobillogo.webp';">
                    </div>
                    <div class="detail-info-box">
                        <div class="desktop-prod-title" style="font-size: 18px; font-weight: bold;">${product.name}</div>
                        <div class="prod-price" style="font-size: 16px; margin-bottom: 10px;">${product.price} TL</div>
                        <div class="size-selector">
                            <button class="size-btn" onclick="selectSize(this)">S</button>
                            <button class="size-btn" onclick="selectSize(this)">M</button>
                            <button class="size-btn" onclick="selectSize(this)">L</button>
                            <button class="size-btn" onclick="selectSize(this)">XL</button>
                        </div>
                        <button class="add-to-cart-btn" onclick="addToCart('${product.name}', ${product.price})">${btnTxt}</button>
                        <div class="prod-desc-formal">
                            <hr style="opacity:0.2; margin: 15px 0;">
                            <div style="opacity: 0.6; font-size: 10px;">
                                INFO:<br>
                                ${product.desc}<br>
                                Free shipping worldwide.<br>
                                14 days return policy.
                            </div>
                        </div>
                    </div>
                </div>`;
            
            pool.style.display = 'flex';
            document.getElementById('globalOverlay').style.display = 'block';
            
            setTimeout(() => {
                pool.classList.add('active');
                document.getElementById('globalOverlay').classList.add('active');
            }, 10);
        };

        // Beden SeÃ§imi
        window.selectSize = function(btn) {
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        };

        // Sepete Ekle
        window.addToCart = function(name, price) {
            const sizeBtn = document.querySelector('.size-btn.selected');
            const size = sizeBtn ? sizeBtn.innerText : null;
            
            if(!size) { 
                alert(currentLang === 'tr' ? "LÃ¼tfen beden seÃ§iniz." : "Please select a size."); 
                return; 
            }
            
            const existing = cart.find(i => i.name === name && i.size === size);
            if(existing) {
                existing.qty++;
            } else {
                cart.push({ name, price: parseFloat(price), size, qty: 1 });
            }
            
            updateCartUI();
            closeAllPanels();
            toggleCart();
        };

        // Sepet ArayÃ¼zÃ¼nÃ¼ GÃ¼ncelle
        window.updateCartUI = function() {
            const container = document.getElementById('cartItems');
            const cartBtn = document.getElementById('cartCount');
            const totalEl = document.getElementById('cartTotal');
            const footer = document.getElementById('cartFooter');
            
            const totalQty = cart.reduce((a, b) => a + b.qty, 0);
            const prefix = currentLang === 'tr' ? cartBtn.getAttribute('data-tr-prefix') : cartBtn.getAttribute('data-en-prefix');
            cartBtn.innerText = `${prefix} (${totalQty})`;

            if(cart.length === 0) {
                container.innerHTML = `<div style="opacity:0.5; font-size:10px; padding:20px; text-align:center;">${currentLang === 'tr' ? "sepetiniz boÅŸ" : "cart is empty"}</div>`;
                if(footer) footer.style.display = 'none';
                return;
            }

            if(footer) footer.style.display = 'block';
            let total = 0;
            container.innerHTML = cart.map((item, index) => {
                total += (item.price * item.qty);
                return `
                <div class="cart-item">
                    <div><b>${item.name}</b> (${item.size}) x ${item.qty}</div>
                    <div>${item.price * item.qty} TL</div>
                </div>`;
            }).join('');
            if(totalEl) totalEl.innerText = total + ' TL';
        };

        // Sepeti AÃ§/Kapat
        window.toggleCart = function() {
            const sideCart = document.getElementById('sideCart');
            const overlay = document.getElementById('globalOverlay');
            if(!sideCart || !overlay) return;
            
            // EÄŸer sepet aÃ§Ä±lÄ±yorsa ve overlay zaten aÃ§Ä±ksa (Ã¼rÃ¼n detaydan geliniyorsa) dokunma, yoksa aÃ§
            const isActive = sideCart.classList.contains('active');
            
            if (isActive) {
                sideCart.classList.remove('active');
                overlay.classList.remove('active');
                setTimeout(() => overlay.style.display = 'none', 300);
            } else {
                sideCart.classList.add('active');
                overlay.style.display = 'block';
                setTimeout(() => overlay.classList.add('active'), 10);
            }
        };

        // TÃ¼m Panelleri Kapat
        window.closeAllPanels = function() {
            document.querySelectorAll('#infoPool, #productDetailPool').forEach(p => p.classList.remove('active'));
            document.getElementById('sideCart')?.classList.remove('active');
            
            const overlay = document.getElementById('globalOverlay');
            if(overlay) overlay.classList.remove('active');
            
            setTimeout(() => {
                document.querySelectorAll('#infoPool, #productDetailPool').forEach(p => p.style.display = 'none');
                if(overlay) overlay.style.display = 'none';
            }, 300);
        };

        window.handleOverlayClick = function() { closeAllPanels(); };

        // Bilgi ModalÄ±nÄ± AÃ§ (Shipping vb.)
        window.openInfoModal = function() {
            const pool = document.getElementById('infoPool');
            const overlay = document.getElementById('globalOverlay');
            if(pool) {
                pool.style.display = 'flex';
                overlay.style.display = 'block';
                setTimeout(() => {
                    pool.classList.add('active');
                    overlay.classList.add('active');
                }, 10);
            }
        };

        window.showInfo = function(type) {
             document.querySelectorAll('.info-nav-link').forEach(l => l.classList.remove('active'));
             // TÄ±klanan elemanÄ± bulma (basit mantÄ±k)
             event.target.classList.add('active');

             const content = document.getElementById('infoContent');
             if(type === 'shipping') content.innerHTML = "<p>Worldwide shipping available. Orders are processed within 2-4 business days.</p>";
             if(type === 'returns') content.innerHTML = "<p>Returns accepted within 14 days of delivery. Item must be unworn.</p>";
             if(type === 'contact') content.innerHTML = "<p>Contact us at: info@reeha.com.tr</p>";
        };

        // Tema DeÄŸiÅŸtir
        window.toggleTheme = function() {
            const body = document.body;
            const isDark = body.getAttribute('data-theme') === 'dark';
            body.setAttribute('data-theme', isDark ? 'light' : 'dark');
        };

        // Dil DeÄŸiÅŸtir
        window.toggleLanguage = function() {
            currentLang = currentLang === 'tr' ? 'en' : 'tr';
            const langBtn = document.querySelector('.lang-wrapper');
            if(langBtn) langBtn.innerText = currentLang === 'tr' ? 'tr/en' : 'en/tr';
            
            // MenÃ¼ yazÄ±larÄ±nÄ± gÃ¼ncelle
            const navLinks = document.querySelectorAll('#main-nav .nav-link');
            if(navLinks.length >= 2) {
                if(currentLang === 'en') {
                    navLinks[0].innerText = 'tops';
                    navLinks[1].innerText = 'bottoms';
                } else {
                    navLinks[0].innerText = 'Ã¼st';
                    navLinks[1].innerText = 'alt';
                }
            }
            updateCartUI(); // Sepet baÅŸlÄ±ÄŸÄ±nÄ± gÃ¼ncellemek iÃ§in
        };

        // Ã–deme Sistemi (SimÃ¼lasyon)
        window.startCheckout = function() {
            if (cart.length === 0) {
                alert(currentLang === 'tr' ? "sepetiniz boÅŸ." : "cart is empty.");
                return;
            }

            const message = currentLang === 'tr' 
                ? "ðŸ›’ Ã–deme Sistemimiz GÃ¼ncelleniyor!\n\nÅžu anda yeni ve daha gÃ¼venli bir Ã¶deme altyapÄ±sÄ±na geÃ§iÅŸ yapÄ±yoruz.\n\nTeÅŸekkÃ¼rler." 
                : "ðŸ›’ Payment System Update!\n\nWe are currently switching to a new infrastructure.\n\nThank you.";

            alert(message);
        };

        // BaÅŸlangÄ±Ã§
        window.addEventListener('load', () => {
            window.updateTime();
            setInterval(window.updateTime, 1000);
        });
    </script>
</body>
</html>
